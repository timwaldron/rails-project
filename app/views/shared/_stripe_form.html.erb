<% if user_signed_in? %>
  <%= form_tag charges_path do |f|%>
    <input type="hidden" value="<%= @game.id %>" name="game_id">
    <input type="hidden" value="<%= current_user.id %>" name="user_id">
    <article>
      <% if flash[:error].present? %>
        <div id="error_explanation">
          <p><%= flash[:error] %></p>
        </div>
      <% end %>
      <label class="amount">

        <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
                data-description="Purchase Game"
                data-label="Purchase for $<%= number_with_delimiter(sprintf("%.2f", @game.price.round(2))) %> AUD"
                data-amount="<%= (@game.price * 100) %>"
                data-locale="auto"></script>
      </label>
    </article>
  <% end %>
<% end %>